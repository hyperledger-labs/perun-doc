<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="830px" preserveAspectRatio="none" style="width:414px;height:830px;" version="1.1" viewBox="0 0 414 830" width="414px" zoomAndPan="magnify"><defs><filter height="300%" id="fjmvqf6fkytv2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fjmvqf6fkytv2)" height="51.2656" style="stroke:#000000;stroke-width:2.0;" width="257" x="14" y="310.4922"/><rect fill="#FFFFFF" filter="url(#fjmvqf6fkytv2)" height="277" style="stroke:#000000;stroke-width:2.0;" width="384" x="14" y="374.7578"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1.0;" width="384" x="14" y="607.8203"/><rect fill="#FFFFFF" filter="url(#fjmvqf6fkytv2)" height="64.2656" style="stroke:#000000;stroke-width:2.0;" width="253" x="14" y="664.7578"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="30" x2="30" y1="40.2969" y2="748.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="235" x2="235" y1="40.2969" y2="748.0234"/><rect fill="#FEFECE" filter="url(#fjmvqf6fkytv2)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="46" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="12" y="24.9951">Alice</text><rect fill="#FEFECE" filter="url(#fjmvqf6fkytv2)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="212" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="219" y="24.9951">Bob</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="30" x2="72" y1="69.4297" y2="69.4297"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="72" x2="72" y1="69.4297" y2="82.4297"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="31" x2="72" y1="82.4297" y2="82.4297"/><polygon fill="#0000FF" points="41,78.4297,31,82.4297,41,86.4297,37,82.4297" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="37" y="64.3638">User proposes update</text><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="72" y1="141.8281" y2="141.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="72" y1="141.8281" y2="154.8281"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="72" y1="154.8281" y2="154.8281"/><polygon fill="#A80036" points="41,150.8281,31,154.8281,41,158.8281,37,154.8281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="37" y="106.4966">Generate an updated state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="37" y="121.6294">(modify balances and/or data;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="37" y="136.7622">increment version)</text><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="72" y1="183.9609" y2="183.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="72" y1="183.9609" y2="196.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="72" y1="196.9609" y2="196.9609"/><polygon fill="#A80036" points="41,192.9609,31,196.9609,41,200.9609,37,196.9609" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="37" y="178.895">Sign updated state.</text><polygon fill="#A80036" points="223,237.2266,233,241.2266,223,245.2266,227,241.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="229" y1="241.2266" y2="241.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="72" y="221.0278">Updated state with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="84" y="236.1606">alice signature.</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="235" x2="277" y1="285.4922" y2="285.4922"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="277" x2="277" y1="285.4922" y2="298.4922"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="236" x2="277" y1="298.4922" y2="298.4922"/><polygon fill="#0000FF" points="246,294.4922,236,298.4922,246,302.4922,242,298.4922" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="242" y="265.2935">User chooses to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="242" y="280.4263">accept/reject</text><path d="M14,310.4922 L84,310.4922 L84,317.4922 L74,327.4922 L14,327.4922 L14,310.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="51.2656" style="stroke:#000000;stroke-width:2.0;" width="257" x="14" y="310.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="29" y="323.5591">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="99" y="322.7026">[if user did not respond]</text><polygon fill="#A80036" points="41,349.7578,31,353.7578,41,357.7578,37,353.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="234" y1="353.7578" y2="353.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="113" y="348.6919">Reject</text><path d="M14,374.7578 L84,374.7578 L84,381.7578 L74,391.7578 L14,391.7578 L14,374.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="277" style="stroke:#000000;stroke-width:2.0;" width="384" x="14" y="374.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="29" y="387.8247">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="99" y="386.9683">[if accept]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="14" x2="398" y1="608.8203" y2="608.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="60" x="19" y="619.0308">[if reject]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="235" x2="277" y1="418.0234" y2="418.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="277" x2="277" y1="418.0234" y2="431.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="236" x2="277" y1="431.0234" y2="431.0234"/><polygon fill="#A80036" points="246,427.0234,236,431.0234,246,435.0234,242,431.0234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="242" y="412.9575">Sign updated state</text><line style="stroke:#A80036;stroke-width:1.0;" x1="235" x2="277" y1="475.2891" y2="475.2891"/><line style="stroke:#A80036;stroke-width:1.0;" x1="277" x2="277" y1="475.2891" y2="488.2891"/><line style="stroke:#A80036;stroke-width:1.0;" x1="236" x2="277" y1="488.2891" y2="488.2891"/><polygon fill="#A80036" points="246,484.2891,236,488.2891,246,492.2891,242,488.2891" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="242" y="455.0903">Store updated state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="242" y="470.2231">with all signatures.</text><polygon fill="#A80036" points="41,528.5547,31,532.5547,41,536.5547,37,532.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="234" y1="532.5547" y2="532.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="88" y="512.356">Bob signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="57" y="527.4888">over the updated state.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="72" y1="576.8203" y2="576.8203"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="72" y1="576.8203" y2="589.8203"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="72" y1="589.8203" y2="589.8203"/><polygon fill="#A80036" points="41,585.8203,31,589.8203,41,593.8203,37,589.8203" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="37" y="556.6216">Store updated state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="37" y="571.7544">with all signatures.</text><polygon fill="#A80036" points="41,639.7578,31,643.7578,41,647.7578,37,643.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="234" y1="643.7578" y2="643.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="113" y="638.6919">Reject</text><path d="M14,664.7578 L84,664.7578 L84,671.7578 L74,681.7578 L14,681.7578 L14,664.7578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="64.2656" style="stroke:#000000;stroke-width:2.0;" width="253" x="14" y="664.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="29" y="677.8247">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="152" x="99" y="676.9683">[if bob did not respond]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="72" y1="708.0234" y2="708.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72" x2="72" y1="708.0234" y2="721.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="31" x2="72" y1="721.0234" y2="721.0234"/><polygon fill="#A80036" points="41,717.0234,31,721.0234,41,725.0234,37,721.0234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="37" y="702.9575">Treat as rejected</text><rect fill="#DDDDDD" height="58.8906" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="201" x="197" y="756.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="203" y="774.0186">Note:</text><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="203" y="790.3154">Blue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="242" y="790.3154">arrow indicates</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="189" x="203" y="806.6123">user interaction is required.</text><!--MD5=[b56abbb4a7cb0277ff8a0fd9342e5cae]
@startuml transact_generic
!pragma teoz true
hide footbox
skinparam SequenceMessageAlign center

participant "Alice" as alice
participant "Bob" as bob

alice -[#blue]> alice: User proposes update
alice -> alice: Generate an updated state\n(modify balances and/or data;\nincrement version)
alice -> alice: Sign updated state.
alice -> bob: Updated state with\nalice signature.
bob -[#blue]> bob: User chooses to\naccept/reject
opt if user did not respond
alice <- bob: Reject
end
opt if accept 
bob -> bob: Sign updated state
bob -> bob: Store updated state \nwith all signatures.
alice <- bob: Bob signature\nover the updated state.
alice -> alice: Store updated state \nwith all signatures.
else if reject
alice <- bob: Reject
end
opt if bob did not respond
alice -> alice: Treat as rejected
end

legend bottom right
<b>Note:</b>
<color:blue>Blue </color> arrow indicates
user interaction is required.
endlegend

@enduml

PlantUML version 1.2020.21(Mon Nov 30 16:40:11 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>