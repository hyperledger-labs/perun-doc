<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="966px" preserveAspectRatio="none" style="width:509px;height:966px;" version="1.1" viewBox="0 0 509 966" width="509px" zoomAndPan="magnify"><defs><filter height="300%" id="f8lmh1c0kr0ix" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f8lmh1c0kr0ix)" height="222.2109" style="stroke:#000000;stroke-width:2.0;" width="384.5" x="8" y="283.4922"/><rect fill="#FFFFFF" height="150.3359" style="stroke:none;stroke-width:1.0;" width="384.5" x="8" y="355.3672"/><rect fill="#FFFFFF" filter="url(#f8lmh1c0kr0ix)" height="120.3359" style="stroke:#000000;stroke-width:2.0;" width="334.5" x="33" y="376.3672"/><rect fill="#FFFFFF" height="43.9375" style="stroke:none;stroke-width:1.0;" width="334.5" x="33" y="452.7656"/><rect fill="#FFFFFF" filter="url(#f8lmh1c0kr0ix)" height="74.875" style="stroke:#000000;stroke-width:2.0;" width="260" x="33" y="518.7031"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="40.2969" y2="883.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="267" x2="267" y1="40.2969" y2="883.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="351.5" x2="351.5" y1="40.2969" y2="883.9063"/><rect fill="#FEFECE" filter="url(#f8lmh1c0kr0ix)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="46" x="24" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="31" y="24.9951">Alice</text><rect fill="#FEFECE" filter="url(#f8lmh1c0kr0ix)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="99" x="215.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="222.5" y="24.9951">Parent Layer</text><rect fill="#FEFECE" filter="url(#f8lmh1c0kr0ix)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="42" x="328.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="335.5" y="24.9951">Bob</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="49" x2="91" y1="84.5625" y2="84.5625"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="91" x2="91" y1="84.5625" y2="97.5625"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="50" x2="91" y1="97.5625" y2="97.5625"/><polygon fill="#0000FF" points="60,93.5625,50,97.5625,60,101.5625,56,97.5625" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="56" y="64.3638">User specifies participants, app,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="56" y="79.4966">initial balance and data.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="91" y1="172.0938" y2="172.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="91" x2="91" y1="172.0938" y2="185.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50" x2="91" y1="185.0938" y2="185.0938"/><polygon fill="#A80036" points="60,181.0938,50,185.0938,60,189.0938,56,185.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="56" y="121.6294">Generate channel proposal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="56" y="136.7622">with challenge duration and;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="56" y="151.895">alice's nonce share,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="56" y="167.0278">ephemeral off-chain address.</text><polygon fill="#A80036" points="339.5,210.2266,349.5,214.2266,339.5,218.2266,343.5,214.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="345.5" y1="214.2266" y2="214.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="126.25" y="209.1606">Send Channel Proposal</text><line style="stroke:#0000FF;stroke-width:1.0;" x1="351.5" x2="393.5" y1="258.4922" y2="258.4922"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="393.5" x2="393.5" y1="258.4922" y2="271.4922"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="352.5" x2="393.5" y1="271.4922" y2="271.4922"/><polygon fill="#0000FF" points="362.5,267.4922,352.5,271.4922,362.5,275.4922,358.5,271.4922" style="stroke:#0000FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="358.5" y="238.2935">User chooses to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="358.5" y="253.4263">accept/reject</text><path d="M8,283.4922 L78,283.4922 L78,290.4922 L68,300.4922 L8,300.4922 L8,283.4922 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="222.2109" style="stroke:#000000;stroke-width:2.0;" width="384.5" x="8" y="283.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="23" y="296.5591">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="93" y="295.7026">[if user did not respond</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="93" y="308.5073">within expected time]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="8" x2="392.5" y1="356.3672" y2="356.3672"/><polygon fill="#A80036" points="60,333.3672,50,337.3672,60,341.3672,56,337.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54" x2="350.5" y1="337.3672" y2="337.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="180.75" y="332.3013">Reject</text><path d="M33,376.3672 L103,376.3672 L103,383.3672 L93,393.3672 L33,393.3672 L33,376.3672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="120.3359" style="stroke:#000000;stroke-width:2.0;" width="334.5" x="33" y="376.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="48" y="389.4341">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="118" y="388.5776">[accept]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33" x2="367.5" y1="453.7656" y2="453.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="38" y="463.9761">[reject]</text><polygon fill="#A80036" points="60,430.7656,50,434.7656,60,438.7656,56,434.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54" x2="350.5" y1="434.7656" y2="434.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="95.75" y="414.5669">Respond with bob's nonce share,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="106.75" y="429.6997">ephemeral off-chain address.</text><polygon fill="#A80036" points="60,484.7031,50,488.7031,60,492.7031,56,488.7031" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54" x2="350.5" y1="488.7031" y2="488.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="180.75" y="483.6372">Reject</text><path d="M33,518.7031 L103,518.7031 L103,525.7031 L93,535.7031 L33,535.7031 L33,518.7031 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="74.875" style="stroke:#000000;stroke-width:2.0;" width="260" x="33" y="518.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="48" y="531.77">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="118" y="530.9136">[if Bob does not respond</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="118" y="543.7183">within expected time]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="91" y1="572.5781" y2="572.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="91" x2="91" y1="572.5781" y2="585.5781"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50" x2="91" y1="585.5781" y2="585.5781"/><polygon fill="#A80036" points="60,581.5781,50,585.5781,60,589.5781,56,585.5781" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="56" y="567.5122">Reject</text><path d="M30,607.5781 L30,632.5781 L370,632.5781 L370,617.5781 L360,607.5781 L30,607.5781 " fill="#D3D3D3" filter="url(#f8lmh1c0kr0ix)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M360,607.5781 L360,617.5781 L370,617.5781 L360,607.5781 " fill="#D3D3D3" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="67.75" y="624.645">When rejected, the protocol stops here.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="91" y1="677.9766" y2="677.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="91" x2="91" y1="677.9766" y2="690.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50" x2="91" y1="690.9766" y2="690.9766"/><polygon fill="#A80036" points="60,686.9766,50,690.9766,60,694.9766,56,690.9766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="56" y="657.7778">Generate &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="56" y="672.9106">sign initial state</text><line style="stroke:#A80036;stroke-width:1.0;" x1="351.5" x2="393.5" y1="677.9766" y2="677.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="393.5" x2="393.5" y1="677.9766" y2="690.9766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="352.5" x2="393.5" y1="690.9766" y2="690.9766"/><polygon fill="#A80036" points="362.5,686.9766,352.5,690.9766,362.5,694.9766,358.5,690.9766" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="358.5" y="657.7778">Generate &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="358.5" y="672.9106">sign initial state</text><polygon fill="#A80036" points="339.5,731.2422,349.5,735.2422,339.5,739.2422,343.5,735.2422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="345.5" y1="735.2422" y2="735.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="153.25" y="715.0435">Alice signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="149.25" y="730.1763">over initial state</text><polygon fill="#A80036" points="60,775.5078,50,779.5078,60,783.5078,56,779.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="54" x2="350.5" y1="779.5078" y2="779.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="155.75" y="759.3091">Bob signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="149.25" y="774.4419">over initial state</text><line style="stroke:#A80036;stroke-width:1.0;" x1="351.5" x2="393.5" y1="823.7734" y2="823.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="393.5" x2="393.5" y1="823.7734" y2="836.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="352.5" x2="393.5" y1="836.7734" y2="836.7734"/><polygon fill="#A80036" points="362.5,832.7734,352.5,836.7734,362.5,840.7734,358.5,836.7734" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="358.5" y="803.5747">Store initial state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="358.5" y="818.7075">with all signatures.</text><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="91" y1="823.7734" y2="823.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="91" x2="91" y1="823.7734" y2="836.7734"/><line style="stroke:#A80036;stroke-width:1.0;" x1="50" x2="91" y1="836.7734" y2="836.7734"/><polygon fill="#A80036" points="60,832.7734,50,836.7734,60,840.7734,56,836.7734" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="56" y="803.5747">Store initial state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="56" y="818.7075">with all signatures.</text><polygon fill="#A80036" points="255,861.9063,265,865.9063,255,869.9063,259,865.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49" x2="261" y1="865.9063" y2="865.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="142.5" y="860.8403">Fund</text><polygon fill="#A80036" points="278,861.9063,268,865.9063,278,869.9063,274,865.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="272" x2="350.5" y1="865.9063" y2="865.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="293.75" y="860.8403">Fund</text><rect fill="#DDDDDD" height="58.8906" rx="5" ry="5" style="stroke:#000000;stroke-width:1.0;" width="201" x="292.5" y="891.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="298.5" y="909.9014">Note:</text><text fill="#0000FF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="298.5" y="926.1982">Blue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="337.5" y="926.1982">arrow indicates</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="189" x="298.5" y="942.4951">user interaction is required.</text><!--MD5=[21b74285a5107b5092901221e8fe5ba0]
@startuml open_generic
!pragma teoz true
hide footbox
skinparam SequenceMessageAlign center

participant "Alice" as alice
participant "Parent Layer" as parentLayer
participant "Bob" as bob

alice -[#blue]> alice: User specifies participants, app,\ninitial balance and data.
alice -> alice: Generate channel proposal\nwith challenge duration and;\nalice's nonce share,\nephemeral off-chain address.
alice -> bob: Send Channel Proposal
bob -[#blue]> bob: User chooses to\naccept/reject
opt if user did not respond\nwithin expected time
alice <- bob: Reject
else
|||
opt accept
alice <- bob: Respond with bob's nonce share,\nephemeral off-chain address.
else reject
alice <- bob: Reject
end
end

opt if Bob does not respond\nwithin expected time
alice -> alice: Reject
end

note over alice, bob #LightGray
When rejected, the protocol stops here.
end note

alice -> alice: Generate &\nsign initial state
& bob -> bob: Generate &\nsign initial state
alice -> bob: Alice signature\nover initial state
alice <- bob: Bob signature\nover initial state
bob -> bob: Store initial state \nwith all signatures.
& alice -> alice: Store initial state\nwith all signatures.

alice -> parentLayer: Fund
& bob -> parentLayer: Fund

legend bottom right
<b>Note:</b>
<color:blue>Blue </color> arrow indicates
user interaction is required.
endlegend

@enduml

PlantUML version 1.2020.21(Mon Nov 30 16:40:11 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>