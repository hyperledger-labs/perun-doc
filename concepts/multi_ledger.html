<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Multi-ledger channels &mdash; Perun Framework main documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Go-Perun" href="../go-perun/index.html" />
    <link rel="prev" title="Funding and settling protocols" href="protocols_funding_settling.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

            <a href="../index.html" class="icon icon-home"> Perun Framework
          </a>
              <div class="version">
                main
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

<!-- TODO : Include project logo, github repo link, community chat link -->

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="state-channel.html">Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="protocols.html">Protocols</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="channel_types.html">Types of state channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="channel_app.html">Channel app</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocols_phases.html">Phases of a state channel</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocols_funding_settling.html">Funding and settling protocols</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multi-ledger channels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asset-definition">Asset definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contract-deployment">Contract deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#funding">Funding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating">Updating</a></li>
<li class="toctree-l3"><a class="reference internal" href="#settling">Settling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#disputing">Disputing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../go-perun/index.html">Go-Perun</a></li>
<li class="toctree-l1"><a class="reference internal" href="../node/index.html">Perun node</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Perun Framework</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="protocols.html">Protocols</a> &raquo;</li>
      <li>Multi-ledger channels</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/hyperledger-labs/perun-doc/blob/main/source/concepts/multi_ledger.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="multi-ledger-channels">
<h1>Multi-ledger channels<a class="headerlink" href="#multi-ledger-channels" title="Permalink to this heading"></a></h1>
<p>Multi-ledger channels are channels whose assets can reside on different networks.
Here, we focus on the following restricted setting:</p>
<ul class="simple">
<li><p><strong>Payment channels only</strong> (i.e., no forced-execution style app channels).</p></li>
<li><p><strong>The ledgers are of the same type</strong> (e.g., two EVM-compatible blockchains).</p></li>
</ul>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The idea behind multi-ledger channels is that assets are uniquely identifiable across targeted ledgers.
The Perun contract must be deployed on all of them.
Clients dispatch on-chain calls on all ledgers identified by the channel assets.
They must ensure that the state of the contracts on different ledgers is kept in-sync.</p>
<p>If an honest client detects that contracts on different ledgers are out-of-sync, then it must send the corresponding transactions to make the state consistent again. For example, if a client detects that a channel is registered only on Ledger A but not on Ledger B, while assets from Ledger A and Ledger B are concerned, then the client will also register the same channel state on Ledger B.</p>
<a class="reference internal image-reference" href="../_images/multi_ledger_channel.png"><img alt="Multi-ledger channel" src="../_images/multi_ledger_channel.png" style="width: 400px;" /></a>
</section>
<section id="asset-definition">
<h2>Asset definition<a class="headerlink" href="#asset-definition" title="Permalink to this heading"></a></h2>
<p>We require that an asset is uniquable identifiable across all targeted ledgers.
A multi-ledger asset generally consists of the following components:</p>
<ul class="simple">
<li><p><strong>Ledger identifier.</strong> This value identifies the ledger of the asset.</p></li>
<li><p><strong>Asset address.</strong> This value uniquely identifies the asset within the namespace of the given ledger.</p></li>
</ul>
</section>
<section id="contract-deployment">
<h2>Contract deployment<a class="headerlink" href="#contract-deployment" title="Permalink to this heading"></a></h2>
<p>The Perun smart contract must be deployed on all target ledgers.</p>
</section>
<section id="funding">
<h2>Funding<a class="headerlink" href="#funding" title="Permalink to this heading"></a></h2>
<p>For funding a multi-ledger channel, the funding component needs to be capable of communicating with all supported ledgers.</p>
<ul class="simple">
<li><p><strong>Fund.</strong> Looking at the Ledger identifier of an asset, the funding component identifies to which ledger the funding transaction must be sent.</p></li>
<li><p><strong>Check balance.</strong> Channel participants must check the funding on all corresponding ledgers. The funding is complete if the accumulated funding across all ledgers matched the targeted funding balance defined at channel opening.</p></li>
</ul>
</section>
<section id="updating">
<h2>Updating<a class="headerlink" href="#updating" title="Permalink to this heading"></a></h2>
<p>The off-chain update protocol is the same as for single-ledger channels.</p>
</section>
<section id="settling">
<h2>Settling<a class="headerlink" href="#settling" title="Permalink to this heading"></a></h2>
<p>For settling a channel, the final state is registered on all targeted ledgers.
The contracts identify which assets reside on the same ledger and only payout the corresponding assets. When the channel is settled on all targeted ledgers, all funds have been paid out.</p>
</section>
<section id="disputing">
<h2>Disputing<a class="headerlink" href="#disputing" title="Permalink to this heading"></a></h2>
<p>The watcher identifies when ledgers go out-of-sync. It then ensures the consistency of the different ledger states by performing the corresponding on-chain transactions.</p>
<p>For example, if the watcher notices a dispute registration on Ledger A, but not on Ledger B, it registers the the dispute manually on Ledger B.</p>
</section>
</section>


           </div>
          </div>
          <footer>
    
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        
        <a href="../go-perun/index.html" class="btn btn-neutral float-right" title="Go-Perun" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
        
        
        <a href="protocols_funding_settling.html" class="btn btn-neutral" title="Funding and settling protocols" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
        
    </div>
    

    <hr/>

    <div role="contentinfo">
        <p>
        Copyright &copy; 2020-2021, Perun Framework Contributors.
        <br>
        This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>&nbsp;&nbsp;<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="(CC-BY-4.0)" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
        
        <span class="commit">
            Revision <code>c689b06</code>.
        </span>
        

        </p>
    </div>
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>